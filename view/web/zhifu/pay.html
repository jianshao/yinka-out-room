<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script>
    function jsApiCall()
    {
        WeixinJSBridge.invoke(
            'getBrandWCPayRequest',{
                'appId': "{$appId}",
                'timeStamp': "{$timeStamp}",
                'nonceStr': "{$nonceStr}",
                'package': "{$package}",
                'signType': "{$signType}",
                'paySign': "{$paySign}"
            },
              function(res){
                  if(res.err_msg == 'get_brand_wcpay_request:ok' ) {
                      window.location.href="javascript:history.go(-1)";
                  }else if(res.err_msg =='get_brand_wcpay_request:fail'){
                      window.location.href="javascript:history.go(-1)";
                  }else if(res.err_msg =='get_brand_wcpay_request:cancel'){
                      window.location.href="javascript:history.go(-1)";
                  }
              }
        );
    }
    if (typeof WeixinJSBridge == 'undefined'){
        if( document.addEventListener ){
            document.addEventListener('WeixinJSBridgeReady', jsApiCall, false);
        }else if (document.attachEvent){
            document.attachEvent('WeixinJSBridgeReady', jsApiCall);
            document.attachEvent('onWeixinJSBridgeReady', jsApiCall);
        }
    }else{
        jsApiCall();
    }
</script>
</body>
</html>
